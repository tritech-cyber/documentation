define(["config","jquery","janrain/sso/janrain-utils","janrain/sso/janrain-functions","janrain/sso/janrain-events","libs/jquery-plugins/jquery.cookie"],function(a,b,c,d){var e=a.janrain;localStorage.setItem("janrainDebugEnabled","prod"!==a.env.environment),"object"!=typeof window.janrain&&(window.janrain={}),"object"!=typeof window.janrain.settings&&(window.janrain.settings={}),"object"!=typeof window.janrain.settings.capture&&(window.janrain.settings.capture={}),janrain.settings.packages=["login","capture"],janrain.settings.appUrl=e.appUrl,janrain.settings.capture.captureServer=e.capture.captureServer,janrain.settings.capture.appId=e.capture.appId,janrain.settings.capture.clientId=e.capture.clientId;var f=e.capture.httpLoadUrl,g=e.capture.httpsLoadUrl;janrain.settings.language="en-US",janrain.settings.tokenUrl=e.tokenUrl,janrain.settings.tokenAction="event",janrain.settings.borderColor="#ffffff",janrain.settings.fontFamily="Helvetica, Lucida Grande, Verdana, sans-serif",janrain.settings.width=300,janrain.settings.actionText=" ",janrain.settings.capture.redirectOnLogin=!0,janrain.settings.capture.redirectUri="http://localhost/",window.redirect_uri&&(janrain.settings.capture.redirectUri=window.redirect_uri),janrain.settings.capture.flowName="the_slate_group_embedded",janrain.settings.capture.flowVersion="HEAD",janrain.settings.capture.registerFlow="socialRegistration",janrain.settings.capture.setProfileCookie=!0,janrain.settings.capture.keepProfileCookieAfterLogout=!0,janrain.settings.capture.modalCloseHtml="X",janrain.settings.capture.noModalBorderInlineCss=!0,janrain.settings.capture.responseType="token",janrain.settings.capture.returnExperienceUserData=["uuid","email","displayName"],janrain.settings.capture.federate=!0,janrain.settings.capture.federateServer=e.federate.federateServer,janrain.settings.capture.federateXdReceiver=document.location.origin+e.federate.federateXdReceiver,janrain.settings.capture.federateLogoutUri=document.location.origin+e.federate.federateLogoutUri,janrain.settings.capture.federateLogoutCallback=function(){d.debug("federateLogoutCallback() session-shutdown callback.")},janrain.settings.capture.federateEnableSafari=!1,b.extend(!0,janrain.settings,e),b(document).ready(function(){d.debug("janrain doc ready"),janrain.ready=!0,document.referrer&&document.referrer.indexOf("screenToRender=signOut")>-1&&janrain.capture.ui.endCaptureSession()});var h=f;return"https:"===window.location.protocol&&(h=g),requirejs([h]),window.janrainWidgetOnload=function(){d.debug("janrainWidgetOnload")},window.janrainCaptureWidgetOnLoad=function(){var a=janrainExampleImplementationFunctions();"signOut"===a.getParameterByName("screenToRender")&&janrain.capture.ui.endCaptureSession(),janrain.settings.capture.screenToRender=a.getParameterByName("screenToRender"),janrain.events.onCaptureScreenShow.addHandler(a.enhanceReturnExperience),janrain.events.onCaptureSaveSuccess.addHandler(a.hideResendLink),janrain.events.onCaptureSessionEnded.addHandler(a.setNavigationForLoggedOutUser),janrain.events.onCaptureLoginFailed.addHandler(a.handleDeactivatedAccountLogin),janrain.events.onCaptureAccountDeactivateSuccess.addHandler(a.handleAccountDeactivation),janrain.events.onCaptureFederateLogin.addHandler(function(a){d.debug("onCaptureFederateLogin called: data: "),d.debug(a)}),janrain.events.onCaptureFederateRefreshedToken.addHandler(function(a){d.debug("onCaptureFederateRefreshedToken called: data: "),d.debug(a)}),janrain.events.onCaptureFederateNoLogin.addHandler(function(a){d.debug("onCaptureFederateNoLogin called: data: "),d.debug(a)}),janrain.events.onCaptureAccessDenied.addHandler(function(a){d.debug("onCaptureAccessDenied called: data: "),d.debug(a)}),janrain.events.onCaptureExpiredToken.addHandler(function(a){d.debug("onCaptureExpiredToken called: data: "),d.debug(a)}),janrain.events.onCaptureSessionEnded.addHandler(function(a){d.debug("onCaptureSessionEnded called: data: "),d.debug(a)}),janrain.events.onCaptureScreenShow.addHandler(function(a){"returnTraditional"==a.screen&&janrainReturnExperience()}),janrain.events.onCaptureSessionEnded.addHandler(function(){d.beginDebug("onCaptureSessionEnded").deleteProfileData().showRegistration().navClose().myslateSegments().logout().redirectTo().showSlatePlus().myslatePageRefresh().removePlusHomepagePromo().endDebug()}),janrain.events.onCaptureSessionFound.addHandler(function(a){var b=janrain.capture.ui.getProfileCookieData("displayName");d.beginDebug("onCaptureSessionFound").assignLoginID("wapo_login_id",1).login().showUsername(b).navClose().myslateSegments().getTokens(a).getMySlateUserData().checkWrongPage().showSlatePlus().handlePlusHomepagePromo().showProfile(b).handleSlateProfileToken().setSlateProfileToken().endDebug()}),janrain.events.onCaptureLoginStart.addHandler(function(a){(!d.shownRoadblock&&d.hasRoadblock||!d.shownRoadblock&&d.isPitchPage)&&(d.shownRoadblock=1)}),janrain.events.onCaptureLoginSuccess.addHandler(function(a){janrain.capture.ui.modal.close();var b=janrain.capture.ui.getProfileCookieData("displayName");d.beginDebug("onCaptureLoginSuccess").assignLoginID("wapo_login_id",1).login().showUsername(b).navClose().myslateSegments().getTokens(a).getMySlateUserData().checkWrongPage().showSlatePlus().handlePlusHomepagePromo().showProfile(b).handleSlateProfileToken().setSlateProfileToken().endDebug()}),janrain.events.onCaptureLoginFailed.addHandler(function(a){"accountDeactivated"===a.statusMessage&&d.beginDebug("onCaptureLoginFailed").endDebug()}),janrain.events.onCaptureRegistrationSuccess.addHandler(function(a){janrain.capture.ui.modal.close();var b=janrain.capture.ui.getProfileCookieData("displayName");d.beginDebug("onCaptureRegistrationSuccess").login().showUsername(b).navClose().myslateSegments().getTokens(a).showSlatePlus().showProfile(b).addFBEvents().endDebug()}),janrain.events.onCaptureSaveSuccess.addHandler(function(a){var b=janrain.capture.ui.getProfileCookieData("displayName");"editProfile"===a.screen&&d.beginDebug("onCaptureSaveSuccess").profileHeader(b).endDebug()}),janrain.events.onCaptureSaveFailed.addHandler(function(a){var b=a.statusMessage;switch(d.beginDebug("onCaptureSaveFailed:"+b),a.statusMessage){case"accountDeactivated":d.logout().renderScreen("accountDeactivated").showUsername().profileHeader();break;case"accountAlreadyDeactivated":d.logout().showAccountDeactivated().showUsername().profileHeader().redirectTo();break;case"invalidAccessToken":d.renewJanrainToken(1)}d.endDebug()}),janrain.events.onCaptureAccountDeactivateSuccess.addHandler(function(a){d.beginDebug("onCaptureAccountDeactivateSuccess").deleteProfileData().logout().myslateSegments().showAccountDeactivated().showUsername().profileHeader().redirectTo().endDebug()}),janrain.events.onCaptureLinkAccountError.addHandler(function(a){d.handleCaptureLinkAccountError(a)}),b(window).trigger("janrain.ready",!0),e.siteConfig.ready=1,janrain.capture.ui.start()},window.janrainExampleImplementationFunctions=function(){function a(a){}function b(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function c(a){if("returnTraditional"==a.screen){var b=document.getElementById("traditionalWelcomeName"),c=janrain.capture.ui.getReturnExperienceData("displayName");b&&c&&(b.innerHTML="Welcome back, "+c+"!")}}function d(a){"resendVerificationEmail"==a.controlName&&"editProfile"==a.screen&&(document.getElementById("capture_editProfile_resendLink").style.display="none")}function e(a){"accountDeactivated"==a.statusMessage&&janrain.capture.ui.renderScreen("accountDeactivated")}function f(a){"success"==a.status&&(document.getElementById("editProfile").style.display="none",janrain.capture.ui.modal.close(),janrain.capture.ui.endCaptureSession(),janrain.capture.ui.renderScreen("accountDeactivated"))}return{setNavigationForLoggedOutUser:a,getParameterByName:b,enhanceReturnExperience:c,hideResendLink:d,handleDeactivatedAccountLogin:e,handleAccountDeactivation:f}},window.janrain});